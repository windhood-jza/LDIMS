import{w as x,d as N,r as m,l as v,e as R,j as r,an as S,f as a,g as s,$ as E,h as i,i as I,k as b,ao as L,E as u,_ as U}from"./index-BRnZ6Wrp.js";const q=async g=>({code:200,message:"Login successful (simulated)",data:await x.post("/auth/login",g)}),z={class:"login-page"},B={class:"login-container"},C={class:"login-form-container"},F=N({__name:"LoginView",setup(g){const f=L(),c=m(),p=m(!1),_=m(!1),l=v({username:"",password:""}),w=v({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),V=async()=>{if(c.value)try{await c.value.validate(),p.value=!0;try{const o=await q(l);if(o&&o.data){const{token:e,user:t}=o.data;e&&t?(localStorage.setItem("authToken",e),localStorage.setItem("userInfo",JSON.stringify(t)),console.log("登录成功，Token:",e),console.log("用户信息:",t),u.success(o.message||"登录成功"),f.push("/dashboard")):(console.error("登录响应格式错误: token 或 user 不存在"),u.error("登录响应格式错误"))}else console.error("登录响应格式错误: response 或 response.data 不存在"),u.error("登录响应格式错误")}catch(o){console.error("登录失败:",o),u.error(o.message||"登录失败，请稍后重试")}finally{p.value=!1}}catch(o){console.log("表单验证失败:",o)}};return(o,e)=>{const t=i("el-input"),d=i("el-form-item"),y=i("el-checkbox"),k=i("el-button"),h=i("el-form");return I(),R("div",z,[r("div",B,[e[6]||(e[6]=S('<div class="login-banner" data-v-4b40ca41><div class="banner-content" data-v-4b40ca41><h1 class="main-title" data-v-4b40ca41><span class="org-name" data-v-4b40ca41>技术中心融合业务部</span><span class="system-name" data-v-4b40ca41>文档管理系统</span></h1><p data-v-4b40ca41>高效的文档管理平台，助力台信息化建设。提供文档录入、存储、查询和统计分析等全方位功能，让文档管理更简单。</p></div></div>',1)),r("div",C,[a(h,{ref_key:"loginFormRef",ref:c,model:l,rules:w,"label-position":"top",class:"login-form",onSubmit:E(V,["prevent"])},{default:s(()=>[e[5]||(e[5]=r("div",{class:"login-header"},[r("h2",null,"欢迎使用"),r("p",null,"请登录您的账号")],-1)),a(d,{label:"用户名",prop:"username"},{default:s(()=>[a(t,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=n=>l.username=n),placeholder:"请输入用户名",size:"large"},null,8,["modelValue"])]),_:1}),a(d,{label:"密码",prop:"password"},{default:s(()=>[a(t,{type:"password",modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=n=>l.password=n),placeholder:"请输入密码","show-password":"",size:"large"},null,8,["modelValue"])]),_:1}),a(d,null,{default:s(()=>[a(y,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=n=>_.value=n)},{default:s(()=>e[3]||(e[3]=[b("记住密码")])),_:1},8,["modelValue"])]),_:1}),a(d,null,{default:s(()=>[a(k,{type:"primary","native-type":"submit",loading:p.value,class:"login-btn",size:"large"},{default:s(()=>e[4]||(e[4]=[b(" 登 录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])])}}}),T=U(F,[["__scopeId","data-v-4b40ca41"]]);export{T as default};
